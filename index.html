<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semester GPA Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        .gpa-table {
            width: 100%;
            background-color: white;
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .table-header, .course-row {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
            gap: 10px;
            align-items: center;
            justify-items: center;
        }
        .table-header {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            padding: 10px 15px;
            text-align: center;
        }
        .course-row {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
        }
        .course-row:last-child {
            border-bottom: none;
        }
        input, select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            text-align: center;
        }
        .buttons-container {
            display: flex;
            gap: 10px;
            margin: 10px 0;
            justify-content: center;
        }
        button {
            padding: 8px 15px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .remove-btn {
            background-color: #f44336;
            white-space: nowrap;
        }
        .remove-btn:hover {
            background-color: #d32f2f;
        }
        #results {
            margin-top: 20px;
            padding: 20px;
            background-color: #e9f7ef;
            border-radius: 4px;
            display: none;
        }
        .results-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
        }
        .result-column {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
        }
        .result-column h3 {
            margin-top: 0;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
    </style>
</head>
<body>
    <h1>Semester GPA Calculator</h1>
    
    <div class="gpa-table">
        <div class="table-header">
            <div>Course Name</div>
            <div>Type</div>
            <div>Semester 1</div>
            <div>Semester 2</div>
            <div>Action</div>
        </div>
        <div id="course-rows">
            <div class="course-row" id="row-1">
                <div><input type="text" class="course-name-input" placeholder="Name"></div>
                <div>
                    <select class="course-type-select">
                        <option value="regular">Regular</option>
                        <option value="ap">AP/Honors</option>
                    </select>
                </div>
                <div><input type="text" class="letter-grade semester1" placeholder="Grade"></div>
                <div><input type="text" class="letter-grade semester2" placeholder="Grade"></div>
                <div><button class="remove-btn" onclick="removeCourse(1)">Remove</button></div>
            </div>
        </div>
    </div>
    
    <div class="buttons-container">
        <button id="add-course">Add Another Course</button>
        <button id="calculate">Calculate GPA</button>
    </div>
    
    <div id="results">
        <h2>GPA Results</h2>
        <div class="results-grid">
            <div class="result-column">
                <h3>Semester 1</h3>
                <p>Unweighted GPA: <span id="unweighted-gpa1">0.00</span></p>
                <p>Weighted GPA: <span id="weighted-gpa1">0.00</span></p>
            </div>
            <div class="result-column">
                <h3>Semester 2</h3>
                <p>Unweighted GPA: <span id="unweighted-gpa2">0.00</span></p>
                <p>Weighted GPA: <span id="weighted-gpa2">0.00</span></p>
            </div>
            <div class="result-column">
                <h3>Overall</h3>
                <p>Unweighted GPA: <span id="unweighted-gpa-total">0.00</span></p>
                <p>Weighted GPA: <span id="weighted-gpa-total">0.00</span></p>
            </div>
        </div>
    </div>
    
    <script>
        let courseCount = 1;
        
        // Add new course row
        document.getElementById('add-course').addEventListener('click', function() {
            courseCount++;
            const newRow = document.createElement('div');
            newRow.className = 'course-row';
            newRow.id = 'row-' + courseCount;
            newRow.innerHTML = `
                <div><input type="text" class="course-name-input" placeholder="Name"></div>
                <div>
                    <select class="course-type-select">
                        <option value="regular">Regular</option>
                        <option value="ap">AP/Honors</option>
                    </select>
                </div>
                <div><input type="text" class="letter-grade semester1" placeholder="Grade"></div>
                <div><input type="text" class="letter-grade semester2" placeholder="Grade"></div>
                <div><button class="remove-btn" onclick="removeCourse(${courseCount})">Remove</button></div>
            `;
            document.getElementById('course-rows').appendChild(newRow);
        });
        
        // Remove course row
        function removeCourse(id) {
            if (courseCount > 1) {
                const rowToRemove = document.getElementById('row-' + id);
                rowToRemove.remove();
                courseCount--;
            }
        }
        
        // Calculate GPA
        document.getElementById('calculate').addEventListener('click', function() {
            const rows = document.querySelectorAll('.course-row');
            let semester1 = { unweighted: 0, weighted: 0, count: 0 };
            let semester2 = { unweighted: 0, weighted: 0, count: 0 };
            let total = { unweighted: 0, weighted: 0, count: 0 };
            
            rows.forEach(row => {
                const type = row.querySelector('.course-type-select').value;
                const grade1 = row.querySelector('.semester1').value.trim().toUpperCase();
                const grade2 = row.querySelector('.semester2').value.trim().toUpperCase();
                
                // Process Semester 1 grade
                if (grade1) {
                    const unweightedPoints = getGradePoints(grade1);
                    if (unweightedPoints !== null) {
                        let weightedPoints = unweightedPoints;
                        if (type === 'ap' && ['A', 'B', 'C', 'D', 'F'].includes(grade1.replace(/[+-]/g, ''))) {
                            weightedPoints += 1.0;
                        }
                        
                        semester1.unweighted += unweightedPoints;
                        semester1.weighted += weightedPoints;
                        semester1.count++;
                        
                        total.unweighted += unweightedPoints;
                        total.weighted += weightedPoints;
                        total.count++;
                    }
                }
                
                // Process Semester 2 grade
                if (grade2) {
                    const unweightedPoints = getGradePoints(grade2);
                    if (unweightedPoints !== null) {
                        let weightedPoints = unweightedPoints;
                        if (type === 'ap' && ['A', 'B', 'C', 'D', 'F'].includes(grade2.replace(/[+-]/g, ''))) {
                            weightedPoints += 1.0;
                        }
                        
                        semester2.unweighted += unweightedPoints;
                        semester2.weighted += weightedPoints;
                        semester2.count++;
                        
                        total.unweighted += unweightedPoints;
                        total.weighted += weightedPoints;
                        total.count++;
                    }
                }
            });
            
            if (total.count > 0) {
                // Calculate semester GPAs
                const unweightedGPA1 = semester1.count > 0 ? semester1.unweighted / semester1.count : 0;
                const weightedGPA1 = semester1.count > 0 ? semester1.weighted / semester1.count : 0;
                
                const unweightedGPA2 = semester2.count > 0 ? semester2.unweighted / semester2.count : 0;
                const weightedGPA2 = semester2.count > 0 ? semester2.weighted / semester2.count : 0;
                
                // Calculate overall GPA
                const unweightedTotal = total.unweighted / total.count;
                const weightedTotal = total.weighted / total.count;
                
                // Display results
                document.getElementById('unweighted-gpa1').textContent = unweightedGPA1.toFixed(2);
                document.getElementById('weighted-gpa1').textContent = weightedGPA1.toFixed(2);
                document.getElementById('unweighted-gpa2').textContent = unweightedGPA2.toFixed(2);
                document.getElementById('weighted-gpa2').textContent = weightedGPA2.toFixed(2);
                document.getElementById('unweighted-gpa-total').textContent = unweightedTotal.toFixed(2);
                document.getElementById('weighted-gpa-total').textContent = weightedTotal.toFixed(2);
                
                document.getElementById('results').style.display = 'block';
            } else {
                alert('Please enter at least one valid letter grade.');
            }
        });
        
        // Convert letter grade to grade points
        function getGradePoints(grade) {
            const gradeMap = {
                'A+': 4.0, 'A': 4.0, 'A-': 3.7,
                'B+': 3.3, 'B': 3.0, 'B-': 2.7,
                'C+': 2.3, 'C': 2.0, 'C-': 1.7,
                'D+': 1.3, 'D': 1.0, 'D-': 0.7,
                'F': 0.0
            };
            
            // Check if grade is valid
            if (grade in gradeMap) {
                return gradeMap[grade];
            }
            
            // Try to match grades with optional +/-
            const baseGrade = grade[0];
            if (baseGrade && baseGrade in {'A':1, 'B':1, 'C':1, 'D':1, 'F':1}) {
                const modifier = grade.slice(1);
                if (modifier === '+' || modifier === '-' || modifier === '') {
                    const normalizedGrade = baseGrade + (modifier || '');
                    if (normalizedGrade in gradeMap) {
                        return gradeMap[normalizedGrade];
                    }
                }
            }
            
            return null; // Invalid grade
        }
    </script>
</body>
</html>
